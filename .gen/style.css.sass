@import 'compass/css3'

@mixin image-size-by-2($path)
  width: image-width($path) / 2
  height: image-height($path) / 2
  background-size: 100% 100%

*
  margin: 0
  padding: 0

body
  background: white
  color: black
  font-family: "PT Sans", "Trebuchet MS", sans-serif

code, pre
  font-family: "PT Mono", monospace

h1, h2, h3
  font-family: Philosopher, Georgia, serif
  text-align: center
  font-weight: bold

h1
  margin: 15px 0 25px 0
  font-size: 70px
  span
    position: relative
    color: white
  .compass
    position: absolute
    bottom: 15px
    left: 50%
    margin-left: -5px
    +image-size-by-2("dot.png")
    background-size: 100% 100%

h2
  margin: 20px 0 15px 0
  font-size: 36px

h3
  margin: 20px 0 10px 0
  font-size: 24px

p, ul
  margin-bottom: 10px

a
  color: black
  text-decoration: none
  border-bottom: 1px solid #ccc
  display: inline-block
  line-height: 1
  +transition(border 200ms)
  &:hover
    border-bottom-color: black

.center
  width: 680px
  max-width: 100%
  margin: 0 auto
  padding: 10px 25px
  +box-sizing(border-box)

code
  margin: 0 2px
  padding: 0px 5px
  border: 1px solid #eaeaea
  background-color: #fafafa
  border-radius: 3px
  font-size: 13px

pre
  background-color: #fafafa
  border: 1px solid #ccc
  font-size: 13px
  line-height: 19px
  padding: 6px 10px
  margin-bottom: 10px
  overflow: auto
  .kd
    font-weight: bold
  .c1, .s1
    color: #555

.demo
  margin: -5px 0 25px 0
  position: relative
  height: 24px
  .notice
    line-height: 24px
    position: absolute
    top: 50%
    margin-top: -12px
    left: 0
    right: 0
    text-align: center
    color: #666
  .compass-icon
    display: inline-block
    height: 22px
    width: 22px
    border: 2px solid black
    border-radius: 50%
    background-size: 90% 90%
    background-repeat: no-repeat
    background-position: 1px 1px
    margin: 0 7px -7px 1px
    opacity: 0.4
    +animation(rotating 1.3s infinite linear)
    +animation-play-state(paused)
  .compass
    position: absolute
    top: 50%
    left: 50%
    height: 120px + 26px
    width: 120px
    margin: -68px 0 0 -60px
  .circle
    width: 120px
    height: 120px
    border-radius: 50%
    border: 3px solid black
    +box-sizing(border-box)
  .arrow
    position: absolute
    top: 5px
    left: 5px
    width: 110px
    height: 110px
    background-size: 100% 100%
  .letter
    color: white
    font-weight: bold
    text-align: center
    width: 100%
    margin-top: 30px
    position: relative
  .degrees
    margin-top: 6px
    height: 20px
    line-height: 20px
    text-align: center
    font-weight: bold
  .mark
    position: absolute
  &.init-step .init, &.gps-step .gps, &.move-step .move
    .compass-icon
      +animation-play-state(running)
  &.disable .no-support .compass-icon
    +animation(none)
  &.enable
    height: 150px
  &.unanimated
    .notice, .compass
      display: none
    &.init-step .init, &.disable .no-support, &.gps-step .gps, &.move-step .move, &.enable .compass
      display: block
  &.animated
    +transition(height 600ms)
    .notice, .compass
      +rotateX(90deg)
      opacity: 0
      +transition(all 600ms)
    &.init-step .init, &.disable .no-support, &.gps-step .gps, &.move-step .move, &.enable .compass
      +rotateX(0)
      opacity: 1

+keyframes(rotating)
  0%
    +rotate(0)
  100%
    +rotate(360deg)

.meta
  margin: 11px 0 -5px -8px
  a
    height: 36px
    line-height: 36px
    border: none
    position: relative
    padding-right: 10px
    +transition(none)
    -webkit-tap-highlight-color: white(0)
  .text
    display: inline-block
    border-bottom: 1px solid #ccc
    line-height: 1
    +transition(border 200ms)
  .icon
    position: absolute
    top: 4px
    left: 8px
    opacity: 0.8
    +transition(opacity 200ms)
  a:hover
    .text
      border-color: black
    .icon
      opacity: 1
  a:active, a.tapped
    box-shadow: inset 0 0 7px rgba(0, 0, 0, 0.4)
    background: #eaeaea
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0)
  .github
    padding-left: 21px + 18px
    margin-right: 12px
    .icon
      top: 5px
      +image-size-by-2("github.png")
  .evil
    padding-left: 39px + 18px
    .icon
      +image-size-by-2("evilmartians.png")

@media (max-width: 490px)
  h1
    margin: 0 0 10px 0
    font-size: 54px
    .compass
      +scale(0.8)
      bottom: 10px
      margin-left: -6px
  .meta
    .github
      margin-left: (78px - 42px) / 2
  .demo
    height: 48px
    .notice-wrap
      position: relative
    .compass-icon
      position: absolute
      top: -2px
      left: -35px
    .compass
      margin-top: -60px
